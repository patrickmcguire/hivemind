{% extends "base.html" %} {% block content %}
<div class="container">
    <!--jQuery References-->
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.17/jquery-ui.min.js" type="text/javascript"></script>
  <!--Wijmo Widgets JavaScript-->
    <script src="http://cdn.wijmo.com/jquery.wijmo-open.all.2.0.0.min.js" type="text/javascript"></script>
    <script src="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.0.0.min.js" type="text/javascript"></script>
 <!--Theme-->
    <link href="http://cdn.wijmo.com/themes/rocket/jquery-wijmo.css" rel="stylesheet" type="text/css" title="rocket-jqueryui" />
<!--Wijmo Widgets CSS-->
    <link href="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.0.0.min.css" rel="stylesheet" type="text/css" />
<meta property="og:title" content="Facebook Open Graph META Tags"/>
<meta property="og:url" content="http://bwogstats.name/facebook-meta-tags"/>
<link rel="canonical" href="http://bwogstats.com/stats/" />
<meta property="og:title" content="BwogStats: {{ res.term1 }} vs {{ res.term2 }} in Bwog's comments"/>
 <div id='fb-root'></div>
    <script src='http://connect.facebook.net/en_US/all.js'></script>
    <script> 
      FB.init({appId: "280434288737227", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
        //  link: 'https://developers.facebook.com/docs/reference/dialogs/',
          picture: 'http://bwogstats.com/static/img/icon-large.jpg',
          name: '{{res.term1}} vs {{res.term2}} in Bwog Comments',
          caption: 'Average # of votes for each comments',
          description: "BwogStat #47: Bwog comments that contain '{{ res.term1 }}' are
                    are {{ res.ratio }}x
                    more likely to include
                    '{{ res.term2 }}'."
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      }
    
    </script>
  <script id="scriptInit" type="text/javascript">
        $(document).ready(function () {
            $("#wijbarchart").wijbarchart({
                axis: {
                    y: {
                        text: "Percentage of posts"
                    },
                    x: {
                        text: ""
                    }
                },
    
                hint: {
                    content: function () {
                        return this.data.label + '\n ' + this.y + '';
                    }
                },
 
                header: {
                    text: "Expected frequency vs Actual Frequency"
                },
 
                seriesList: [{
                    label: "Expected",
                    legendEntry: true,
                    data: { x: ['Frequency'], y: [ {{ res.independent_joint_prob }}] }
                },
                {
                    label: "Actual",
                    legendEntry: true,
                    data: { x: [''], y: [{{ res.joint_prob }}] }
                }
                ],
                horizontal: false,
                seriesStyles: [{
                    fill: "#27719D", stroke: "#fff", opacity: 1
                },
                {
                    fill: "#259F61", stroke: "#fff", opacity: 1
                }
                ],
 
                seriesHoverStyles: [{ "stroke-width": "1.5", opacity: 1
                }]
            });
        });    
    </script>
<div class="row">
    <div class="span12">
            <div class="ac">
                <h1>
                    Correlations
                </h1>
                <br />
                <p>
                    How much more often do two terms occur together than expected? e.g. Are
                    comments that mention Barnard more likely to mention sexism?
                </p>
            </div>
    </div>
</div>
<div class="row-fluid">
    <div class="span4">
            <form "action"="/bwog/correlation/" , method="get">
            <div class="ac">
                <legend>
                    Terms
                </legend>
            </div>
                <label>
                    First Term
                </label>
                {{ form.term1 }}
                <span class="help-block">
                    Enter the first word or phrase
                </span>
                <label>
                    Second Term
                </label>
                {{ form.term2 }}
                <span class="help-block">
                    Second word/phrase
                </span>
                <div class="form-actions" style="background-color: transparent; border:none;">
                    <button type="submit" value="submit" class="btn btn-large btn-primary">
                        Get Stats!
                    </button>
                        </div>

            </form>
    </div>
    {% if res %}
            <div class="span4">
                <a onclick='postToFeed(); return false;'>share</a>

                <div class="ac">
                <legend>
            
                    Description
                </span>
                </legend>
            </div>
                <p>
                    Comments that include the word
                    '<b>{{ res.term1 }}</b>'
                    are <b>{{ res.ratio }}x</b>
                    more likely to include
                    '<b>{{ res.term2 }}</b>'
                    than the average bwog comment. The likelihood of this occuring by chance
                    is
                    <b>
                        {{ res.independent_joint_prob }}
                    </b>
                </p>
                <p>
                    <div id="wijbarchart" class="ui-widget ui-widget-content ui-corner-all" style="width: 370px;
height: 300px; background: transparent; border: 0px; ">
</div>

            </div>
    <div class="span4">
        <div class="ac">
                <legend>
                    The Numbers
                </legend>
            </div>
            <table class="table table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>
                            Stat
                        </th>
                        <th>
                            {{ res.term1 }}
                        </th>
                        <th>
                            {{ res.term2 }}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Overall Frequency
                        </td>
                        <td>
                            {{ res.term1_prob_pretty }}%
                        </td>
                        <td>
                            {{ res.term2_prob_pretty }}%
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Frequency given the other
                        </td>
                        <td>
                            {{  res.term1_given_term2_prob  }} %
                        </td>
                        <td>
                            {{ res.term2_given_term1_prob }} %
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Variance
                        </td>
                        <td>
                            {{ res.term1_variance }}
                        </td>
                        <td>
                            {{ res.term2_variance }}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Join Probability
                        </td>
                        <td>
                            {{ res.joint_prob }}
                        </td>
                        <td>
                            {{ res.joint_prob }}
                        </td>
                      
                    </tr>
                    <tr>
                        <td>
                            IID probability
                        </td>
                        <td>
                            {{ res.independent_joint_prob }}
                        </td>
                        <td>
                            {{ res.independent_joint_prob }}
                        </td>
                        
                    </tr>
                    <tr>
                        <td>
                            Covariance
                        </td>
                        <td>
                            {{ res.covariance }}
                        </td>
                        <td>
                            {{ res.covariance }}
                        </td>
                        
                    </tr>
                    <tr>
                        <td>
                            Ratio
                        </td>
                        <td>
                            {{ res.ratio }}
                        </td>
                        <td>
                            {{ res.ratio }}
                        </td>
                        
                    </tr>
                    <tr>
                        <td>
                            R
                        </td>
                        <td>
                            {{ res.r }}
                        </td>
                        <td>
                            {{ res.r }}
                        </td>
                        
                    </tr>
                    <tr>
                        <td>
                            R Squared
                        </td>
                        <td>
                            {{ res.r_squared }}
                        </td>
                        <td>
                            {{ res.r_squared }}
                        </td>
                     
                    </tr>
                       <tr>
                        <td>
                            Average score
                        </td>
                        <td>
                            {{ res.term1_average_score }}(<i class="icon-arrow-up baseline"></i>&nbsp;{{ res.term1_average_upvotes }} /<i class="icon-arrow-down baseline"></i>&nbsp;{{ res.term1_average_downvotes }})
                        </td>
                        <td>
                            {{ res.term2_average_score }}(<i class="icon-arrow-up baseline"></i>&nbsp;{{ res.term2_average_upvotes }} /<i class="icon-arrow-down baseline"></i>&nbsp;{{ res.term2_average_downvotes }})
                        </td>
                     
                    </tr>
                </tbody>
            </table>
           {{ term1_worst_body }} 
            {% endif %}
        </div>
    </div>
</div>
</div>
    {% endblock %}